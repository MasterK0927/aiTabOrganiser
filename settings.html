<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="description" content="Settings for AI Tab Manager">
  <title>AI Tab Manager Settings</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="settings.css">
  <link rel="stylesheet" href="settings-onboarding.css">
</head>
<body>
  <div id="app-container">
    <header class="app-header">
      <div class="header-content">
        <div class="header-actions">
          <button id="back-to-main" class="icon-button" aria-label="Back to main">
            <svg class="button-icon" viewBox="0 0 24 24" width="18" height="18">
              <path fill="currentColor" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
            </svg>
          </button>
        </div>
        <h1>Settings</h1>
        <div class="header-utils">
          <button id="dark-mode-toggle" class="icon-button" aria-label="Toggle dark mode">
            <svg class="button-icon dark-mode-icon" viewBox="0 0 24 24" width="18" height="18">
              <path fill="currentColor" d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41.39.39 1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41.39.39 1.03.39 1.41 0l1.06-1.06z"/>
            </svg>
          </button>
          <button 
            id="save-settings" 
            class="primary-button save-button"
            aria-label="Save settings">
            <svg class="button-icon" viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7l-4-4zM12 19c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm1-10H7V4h6v5z"/>
            </svg>
            Save Settings
          </button>
        </div>
      </div>
    </header>

    <main class="app-main settings-main">
      <div class="settings-container">
        <div class="settings-section">
          <h2>Tab Grouping Rules</h2>
          <div class="settings-content">
            <div class="settings-option">
              <label for="similarity-threshold">Similarity Threshold</label>
              <div class="settings-control">
                <input type="range" id="similarity-threshold" min="0.1" max="0.9" step="0.1" value="0.5">
                <span class="settings-value" id="similarity-threshold-value">0.5</span>
              </div>
              <p class="settings-description">Higher values require tabs to be more similar to be grouped together.</p>
            </div>
            
            <div class="settings-option">
              <label for="domain-weight">Domain Weight</label>
              <div class="settings-control">
                <input type="range" id="domain-weight" min="0.1" max="1.0" step="0.1" value="0.6">
                <span class="settings-value" id="domain-weight-value">0.6</span>
              </div>
              <p class="settings-description">How much importance to give to matching domains when grouping tabs.</p>
            </div>
            
            <div class="settings-option">
              <label for="path-weight">URL Path Weight</label>
              <div class="settings-control">
                <input type="range" id="path-weight" min="0.1" max="1.0" step="0.1" value="0.3">
                <span class="settings-value" id="path-weight-value">0.3</span>
              </div>
              <p class="settings-description">How much importance to give to similar URL paths when grouping tabs.</p>
            </div>
            
            <div class="settings-option">
              <label for="title-weight">Title Weight</label>
              <div class="settings-control">
                <input type="range" id="title-weight" min="0.1" max="1.0" step="0.1" value="0.1">
                <span class="settings-value" id="title-weight-value">0.1</span>
              </div>
              <p class="settings-description">How much importance to give to similar titles when grouping tabs.</p>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <h2>Workspace Preferences</h2>
          <div class="settings-content">
            <div class="settings-option">
              <label for="auto-group-tabs">Auto-group tabs in browser</label>
              <div class="settings-control toggle-switch">
                <input type="checkbox" id="auto-group-tabs" checked>
                <label for="auto-group-tabs"></label>
              </div>
              <p class="settings-description">Automatically group tabs in Chrome when creating workspaces.</p>
            </div>
            
            <div class="settings-option">
              <label for="min-workspace-size">Minimum Workspace Size</label>
              <div class="settings-control">
                <input type="number" id="min-workspace-size" min="2" max="10" value="2">
              </div>
              <p class="settings-description">Minimum number of tabs required to create a workspace.</p>
            </div>
            
            <div class="settings-option">
              <label for="naming-strategy">Workspace Naming Strategy</label>
              <div class="settings-control">
                <select id="naming-strategy">
                  <option value="domain-word">Domain + Common Word</option>
                  <option value="domain-only">Domain Only</option>
                  <option value="auto-numbered">Auto-numbered</option>
                </select>
              </div>
              <p class="settings-description">How workspace names are automatically generated.</p>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <h2>Advanced Settings</h2>
          <div class="settings-content">
            <div class="settings-option">
              <label for="preview-mode">Tab Preview Mode</label>
              <div class="settings-control">
                <select id="preview-mode">
                  <option value="auto">Auto (Recommended)</option>
                  <option value="iframe">iFrame Only</option>
                  <option value="screenshot">Screenshot Only</option>
                  <option value="disabled">Disabled</option>
                </select>
              </div>
              <p class="settings-description">How tab previews are displayed in the extension.</p>
            </div>
            
            <div class="settings-option">
              <label for="tab-source">Tab Source</label>
              <div class="settings-control">
                <select id="tab-source">
                  <option value="current-window">Current Window Only</option>
                  <option value="all-windows">All Windows</option>
                  <option value="specific-window">Select Specific Window</option>
                </select>
              </div>
              <p class="settings-description">Choose which windows to include when analyzing tabs.</p>
            </div>

            <div class="settings-option" id="specific-window-container" style="display: none;">
              <label for="specific-window">Select Window</label>
              <div class="settings-control">
                <div class="modern-window-selector">
                  <select id="specific-window">
                    <!-- Will be populated dynamically -->
                  </select>
                  <div class="window-selector-footer">
                    <span class="window-counter" id="window-count">Loading...</span>
                    <button id="refresh-windows" class="refresh-windows-btn">
                      <span class="refresh-icon">â†»</span> Refresh List
                    </button>
                  </div>
                </div>
              </div>
              <p class="settings-description">Select the specific browser window to analyze.</p>
            </div>
            
            <div class="settings-option">
              <label for="export-import">Export/Import Settings</label>
              <div class="settings-control button-group">
                <button id="export-settings" class="secondary-button">Export</button>
                <button id="import-settings" class="secondary-button">Import</button>
              </div>
              <p class="settings-description">Save your settings to a file or load from a previously exported file.</p>
            </div>
            
            <div class="settings-option">
              <label for="reset-settings">Reset to Defaults</label>
              <div class="settings-control">
                <button id="reset-settings" class="warning-button">Reset All Settings</button>
              </div>
              <p class="settings-description">Reset all settings to their default values.</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div id="status-message" class="status-message" role="alert" aria-live="polite">
    </div>
  </div>

  <div id="start-walkthrough-floating" class="floating-help-button" title="Start walkthrough">
    <svg viewBox="0 0 24 24" width="24" height="24">
      <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2zm1.61-9.96c-2.06-.3-3.88.97-4.43 2.79-.18.58.26 1.17.87 1.17h.2c.41 0 .74-.29.88-.67.32-.89 1.27-1.5 2.3-1.28.95.2 1.65 1.13 1.57 2.1-.1 1.34-1.62 1.63-2.45 2.88 0 .01-.01.01-.01.02-.01.02-.02.03-.03.05-.09.15-.18.32-.25.5-.01.03-.03.05-.04.08-.01.02-.01.04-.02.07-.12.34-.2.75-.2 1.25h2c0-.42.11-.77.28-1.07.02-.03.03-.06.05-.09.08-.14.18-.27.28-.39.01-.01.02-.03.03-.04.1-.12.21-.23.33-.34.96-.91 2.26-1.65 1.99-3.56-.24-1.74-1.61-3.21-3.35-3.47z"/>
    </svg>
  </div>

  <input type="file" id="import-file" accept=".json" style="display: none;">
  <script src="settings.js" type="module"></script>
</body>
</html>